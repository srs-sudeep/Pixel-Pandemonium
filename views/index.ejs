<%- include('partials/header2'); -%>
<h1>Welcome <%= user.username %></h1>
    
    <h2>Add Transaction:</h2>
    <form action="/<%= user._id %>/transaction/create" method="POST">
      <label for="amount">Amount:</label>
      <input type="number" id="amount" name="amount" required><br>
      <label for="date">Date:</label>
      <input type="date" id="date" name="date" required><br>
      <label for="description">Description:</label>
      <input type="text" id="description" name="description" required><br>
      <label for="type">Type:</label>
      <select id="type" name="type" required>
        <option value="expense">Expense</option>
        <option value="income">Income</option>
      </select><br>
      <input type="submit" value="Add Transaction">
    </form>
    
    <h2>Transactions:</h2>
    <table>
      <tr>
        <th>Description</th>
        <th>Amount</th>
        <th>Date</th>
        <th>Type</th>
        <th>Actions</th>
      </tr>
      <% Array.from(transactions).forEach(transaction => { %>
        <tr>
          <td><%= transaction.description %></td>
          <td><%= transaction.amount %></td>
          <td><%= transaction.date.toISOString().split("T")[0] %></td>
          <td><%= transaction.type %></td>
          <td>
            <a href="/<%= user._id %>/transaction/<%= transaction._id %>/edit">Edit</a>
            <a href="/<%= user._id %>/transaction/<%= transaction._id %>/delete">Delete</a>
          </td>
        </tr>
      <% }) %>
    </table>
    <%- include('partials/footer'); -%>